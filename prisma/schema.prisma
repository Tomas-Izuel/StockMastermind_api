generator client {
  provider      = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

 model family {
   id       Int    @id @default(autoincrement())
   name     String
   // Relationships
   articles article[]
 }

 model article {
   id              Int     @id @default(autoincrement())
   code            String @unique
   name            String @unique
   model           String
   price           Float
   security_stock  Int
   stock           Int
   max_stock       Int
   order_point     Int
   storage_cost    Float
   size            Int
   family_id        Int

   // Relationships
   family           family          @relation(fields: [family_id], references: [id])
    provider_articles provider_article[]
    order_articles    order_article[]
    sale_articles     sale_article[]
 }

model provider {
  id         Int     @id @default(autoincrement())
  cuit        Int    @unique
  name        String
  is_default  Boolean
  single_shipment_cost Float
  shipment_time Int
  shipment_max_size Int

  // Relationships
  provider_articles provider_article[]
  orders           order[]
}

model provider_article {
  id          Int     @id @default(autoincrement())
  price       Float
  article_id  Int
  provider_id Int

  // Relationships
  article   article   @relation(fields: [article_id], references: [id])
  provider  provider  @relation(fields: [provider_id], references: [id])
}

model order {
  id         Int     @id @default(autoincrement())
  code          String @unique
  date        DateTime
  shipment_count Int
  subtotal    Float
  total       Float
  status_id   Int
  provider_id Int
  order_articles order_article[]

  // Relationships
  order_status order_status @relation(fields: [status_id], references: [id])
  provider     provider     @relation(fields: [provider_id], references: [id])
}

model order_article {
  id          Int     @id @default(autoincrement())
  quantity    Int
  article_id  Int
  order_id    Int

  // Relationships
  article article @relation(fields: [article_id], references: [id])
  order   order   @relation(fields: [order_id], references: [id])
}

model order_status {
  id          Int     @id @default(autoincrement())
  name        String

  // Relationships
  orders order[]
}

model sale{
  id          Int     @id @default(autoincrement())
  code         String @unique
  date        DateTime
  total       Float

  // Relationships
  sale_article sale_article[]
}

model sale_article{
  id          Int     @id @default(autoincrement())
  quantity    Int
  article_id  Int
  sale_id     Int

  // Relationships
  article article @relation(fields: [article_id], references: [id])
  sale    sale    @relation(fields: [sale_id], references: [id])
}

model client {
  id         Int     @id @default(autoincrement())
  cuil       Int    @unique
  name       String
}